# TIL (2025-10-27)



## ğŸ§¨ Learned

### [SQL] : `row_number()`

```sql
-- ë‚´ê°€ í‘¼ ê±°

-- 1íŠ¸
SELECT city.name AS city_name
, country.name AS country_name
, country.continent
, max(city.population)
FROM country 
left JOIN city ON city.countrycode = country.code
WHERE city.name is not null and city.population = max(city.population)
GROUP BY continent
ORDER BY 4 desc -- ì‹¤íŒ¨

-- 2íŠ¸
with mp AS ( -- ëŒ€ë¥™ë³„ ë„ì‹œ ì¸êµ¬ ìµœëŒ€ê°’
  SELECT co.continent, max(ci.population) max_pop
  FROM country co 
  JOIN city ci ON co.code = ci.countrycode
  GROUP BY co.continent) 

SELECT ci.name AS city_name, co.name AS country_name, co.continent, ci.population
FROM country co 
JOIN city ci ON co.code = ci.countrycode
JOIN mp ON co.continent = mp.continent
  and ci.Population = mp.max_pop
ORDER BY ci.population desc -- ì„±ê³µ

```

- í—·ê°ˆë ¸ë˜ ì´ìœ 
  - ìµœëŒ€/ìµœì†Œ ë¬¸ì œ ê°™ì€ ê²½ìš°ì—ëŠ” ë¨¼ì € í•´ë‹¹ ìˆ˜ì¹˜ë¥¼ êµ¬í•œ ë‹¤ìŒ ê·¸ ìˆ˜ì¹˜ì™€ ë§µí•‘ë˜ëŠ” í–‰ì„ ì¶œë ¥í•´ì•¼í•œë‹¤ ìƒê°í•¨.

  - SELECTì—ì„œ ëƒ…ë‹¤ max ë•Œë¦¬ë‹ˆ í•´ë‹¹ ì»¬ëŸ¼ë§Œ maxê°’ì´ ì¶œë ¥ë¨ (ë‚˜ë¨¸ì§€ëŠ” ì•„ë¬´ ëŒ€í‘¯ê°’ ì¶œë ¥)


  - cteë¥¼ ì„œë¸Œì¿¼ë¦¬ë¡œ ì‚¬ìš©í•  ìƒê°ë§Œ í•˜ê³  JOINí•  ìƒê°ì„ ëª»í•¨


```sql
-- íŠœí„°ë‹˜ì´ í‘¸ì‹  ê±°
SELECT
    CityName AS city_name,
    CountryName AS country_name,
    Continent AS continent_name,
    Population AS population
FROM (
    SELECT
        c.Name AS CityName,
        co.Name AS CountryName,
        co.Continent,
        c.Population,
        ROW_NUMBER() OVER (PARTITION BY co.Continent ORDER BY c.Population DESC) AS PopulationRank
    FROM qcc.country co
    JOIN qcc.city c ON c.CountryCode = co.Code
) ranked_cities
WHERE
    PopulationRank = 1
ORDER BY
    Population DESC
```
- íŠ¹ì§• : ìœˆë„ìš° í•¨ìˆ˜ì¸ `ROW_NUMBER()`ë¥¼ ì‚¬ìš©í•˜ì—¬ 1ë“± í–‰ì„ ì¶œë ¥
- ì¥ì  : ì´í•´ê°€ ë¹¨ë¦¬ ë¨
- `ROW_NUMBER()`ëŠ” ë‹¨ìˆœíˆ â€œì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ì—ì„œ ë²ˆí˜¸ë¥¼ ë¶™ì´ëŠ” í•¨ìˆ˜â€ê°€ ì•„ë‹ˆë¼,
**â€œì •ë ¬ ê¸°ì¤€ìœ¼ë¡œ ì •í•´ì§„ ìˆœìœ„ ì •ë³´ë¥¼ ê° í–‰ì— ë§¤í•‘í•´ì£¼ëŠ” í•¨ìˆ˜â€**

---

</br></br>
## â›³ï¸ Liked
- ìˆ˜ì˜ ê°”ë‹¤ì™”ë‹¤. ê°ˆ ë•ŒëŠ” ì£½ì–´ë¼ ì‹«ì€ë° ë˜ í•˜ë©´ ë¿Œë“¯í•˜ê³ ..
- ì ì‹¬ì‹œê°„ì— ë‚®ì ì„ ì¤ë‹¤. ìœ íŠœë¸Œ ê·¸ë§Œ ë³´ê³  ë‚®ì ì„ ìì„œ ì²´ë ¥ì„ ì±„ìš°ì.
</br></br>
## âš ï¸ Lacked
- ì›”ë§ì—ë§Œ ëŒì•„ì˜¤ëŠ” til ì˜ë¯¸ìˆë‚˜ ì‹¶ìŒ... ë‹¤ ë‚´ë¦´ê¹Œ..
- ê°œê°™ì´ ë§í•œ qcc ë³µìŠµ.. ì—´ë°›ì•„..
- në²ˆì§¸ ë§í•œ ë‚˜ì˜ ê¹ƒí—™.. ì£¼ë§ì˜ ë‚´ê°€ í•˜ê² ì§€ ìš°ì›©
</br></br>
## â³ Longed for
- ì„¸ì…˜ì´ ë§ì´ ì˜ˆì •ë˜ì–´ìˆìœ¼ë¯€ë¡œ ë¹ ì§€ì§€ ì•Šê³  **ì§‘ì¤‘**í•´ì„œ ë“£ê¸°
